imageFileNames = {'E:\myImage\testStage\1.png',...
    'E:\myImage\testStage\43.png',...
    'E:\myImage\testStage\44.png',...
    'E:\myImage\testStage\57.png',...
    'E:\myImage\testStage\58.png',...
    'E:\myImage\testStage\71.png',...
    'E:\myImage\testStage\72.png',...
    'E:\myImage\testStage\86.png',...
    'E:\myImage\testStage\99.png',...
    'E:\myImage\testStage\100.png',...
    'E:\myImage\testStage\113.png',...
    'E:\myImage\testStage\114.png',...
    'E:\myImage\testStage\155.png',...
    'E:\myImage\testStage\169.png',...
    'E:\myImage\testStage\211.png',...
    'E:\myImage\testStage\253.png',...
    'E:\myImage\testStage\254.png',...
    'E:\myImage\testStage\267.png',...
    'E:\myImage\testStage\268.png',...
    'E:\myImage\testStage\281.png',...
    'E:\myImage\testStage\282.png',...
    'E:\myImage\testStage\296.png',...
    'E:\myImage\testStage\310.png',...
    'E:\myImage\testStage\422.png',...
    'E:\myImage\testStage\435.png',...
    'E:\myImage\testStage\436.png',...
    'E:\myImage\testStage\449.png',...
    'E:\myImage\testStage\450.png',...
    'E:\myImage\testStage\463.png',...
    'E:\myImage\testStage\464.png',...
    'E:\myImage\testStage\477.png',...
    'E:\myImage\testStage\478.png',...
    'E:\myImage\testStage\491.png',...
    'E:\myImage\testStage\492.png',...
    'E:\myImage\testStage\505.png',...
    'E:\myImage\testStage\506.png',...
    'E:\myImage\testStage\519.png',...
    'E:\myImage\testStage\520.png',...
    'E:\myImage\testStage\533.png',...
    'E:\myImage\testStage\534.png',...
    'E:\myImage\testStage\547.png',...
    'E:\myImage\testStage\548.png',...
    'E:\myImage\testStage\561.png',...
    'E:\myImage\testStage\562.png',...
    'E:\myImage\testStage\575.png',...
    'E:\myImage\testStage\576.png',...
    'E:\myImage\testStage\589.png',...
    'E:\myImage\testStage\590.png',...
    'E:\myImage\testStage\603.png',...
    'E:\myImage\testStage\604.png',...
    'E:\myImage\testStage\617.png',...
    'E:\myImage\testStage\618.png',...
    'E:\myImage\testStage\631.png',...
    'E:\myImage\testStage\632.png',...
    'E:\myImage\testStage\645.png',...
    'E:\myImage\testStage\646.png',...
    'E:\myImage\testStage\659.png',...
    'E:\myImage\testStage\660.png',...
    'E:\myImage\testStage\673.png',...
    'E:\myImage\testStage\674.png',...
    'E:\myImage\testStage\687.png',...
    'E:\myImage\testStage\688.png',...
    'E:\myImage\testStage\701.png',...
    'E:\myImage\testStage\702.png',...
    'E:\myImage\testStage\729.png',...
    'E:\myImage\testStage\757.png',...
    'E:\myImage\testStage\758.png',...
    'E:\myImage\testStage\785.png',...
    'E:\myImage\testStage\799.png',...
    'E:\myImage\testStage\855.png',...
    'E:\myImage\testStage\856.png',...
    'E:\myImage\testStage\869.png',...
    'E:\myImage\testStage\870.png',...
    'E:\myImage\testStage\883.png',...
    'E:\myImage\testStage\897.png',...
    'E:\myImage\testStage\911.png',...
    'E:\myImage\testStage\926.png',...
    'E:\myImage\testStage\939.png',...
    'E:\myImage\testStage\940.png',...
    'E:\myImage\testStage\953.png',...
    'E:\myImage\testStage\954.png',...
    'E:\myImage\testStage\967.png',...
    'E:\myImage\testStage\968.png',...
    'E:\myImage\testStage\981.png',...
    'E:\myImage\testStage\982.png',...
    'E:\myImage\testStage\995.png',...
    'E:\myImage\testStage\996.png',...
    'E:\myImage\testStage\1009.png',...
    'E:\myImage\testStage\1010.png',...
    'E:\myImage\testStage\1023.png',...
    'E:\myImage\testStage\1024.png',...
    'E:\myImage\testStage\1037.png',...
    'E:\myImage\testStage\1038.png',...
    'E:\myImage\testStage\1051.png',...
    'E:\myImage\testStage\1052.png',...
    'E:\myImage\testStage\1065.png',...
    'E:\myImage\testStage\1066.png',...
    'E:\myImage\testStage\1079.png',...
    'E:\myImage\testStage\1080.png',...
    'E:\myImage\testStage\1093.png',...
    'E:\myImage\testStage\1094.png',...
    'E:\myImage\testStage\1107.png',...
    'E:\myImage\testStage\1108.png',...
    'E:\myImage\testStage\1121.png',...
    'E:\myImage\testStage\1122.png',...
    'E:\myImage\testStage\1135.png',...
    'E:\myImage\testStage\1136.png',...
    'E:\myImage\testStage\1149.png',...
    'E:\myImage\testStage\1150.png',...
    'E:\myImage\testStage\1163.png',...
    'E:\myImage\testStage\1164.png',...
    'E:\myImage\testStage\1177.png',...
    'E:\myImage\testStage\1178.png',...
    'E:\myImage\testStage\1191.png',...
    'E:\myImage\testStage\1192.png',...
    'E:\myImage\testStage\1205.png',...
    'E:\myImage\testStage\1206.png',...
    'E:\myImage\testStage\1219.png',...
    'E:\myImage\testStage\1220.png',...
    'E:\myImage\testStage\1233.png',...
    'E:\myImage\testStage\1234.png',...
    'E:\myImage\testStage\1247.png',...
    'E:\myImage\testStage\1248.png',...
    'E:\myImage\testStage\1261.png',...
    'E:\myImage\testStage\1262.png',...
    'E:\myImage\testStage\1275.png',...
    'E:\myImage\testStage\1276.png',...
    'E:\myImage\testStage\1289.png',...
    'E:\myImage\testStage\1290.png',...
    'E:\myImage\testStage\1303.png',...
    'E:\myImage\testStage\1304.png',...
    'E:\myImage\testStage\1317.png',...
    'E:\myImage\testStage\1318.png',...
    'E:\myImage\testStage\1331.png',...
    'E:\myImage\testStage\1332.png',...
    'E:\myImage\testStage\1345.png',...
    'E:\myImage\testStage\1346.png',...
    'E:\myImage\testStage\1359.png',...
    'E:\myImage\testStage\1360.png',...
    'E:\myImage\testStage\1373.png',...
    'E:\myImage\testStage\1374.png',...
    'E:\myImage\testStage\1387.png',...
    'E:\myImage\testStage\1388.png',...
    'E:\myImage\testStage\1401.png',...
    'E:\myImage\testStage\1402.png',...
    'E:\myImage\testStage\1415.png',...
    'E:\myImage\testStage\1416.png',...
    'E:\myImage\testStage\1429.png',...
    'E:\myImage\testStage\1430.png',...
    'E:\myImage\testStage\1443.png',...
    'E:\myImage\testStage\1444.png',...
    'E:\myImage\testStage\1457.png',...
    'E:\myImage\testStage\1458.png',...
    'E:\myImage\testStage\1471.png',...
    'E:\myImage\testStage\1472.png',...
    'E:\myImage\testStage\1485.png',...
    'E:\myImage\testStage\1486.png',...
    'E:\myImage\testStage\1499.png',...
    'E:\myImage\testStage\1500.png',...
    'E:\myImage\testStage\1514.png',...
    'E:\myImage\testStage\1527.png',...
    'E:\myImage\testStage\1528.png',...
    'E:\myImage\testStage\1541.png',...
    'E:\myImage\testStage\1542.png',...
    'E:\myImage\testStage\1555.png',...
    'E:\myImage\testStage\1556.png',...
    'E:\myImage\testStage\1569.png',...
    'E:\myImage\testStage\1570.png',...
    'E:\myImage\testStage\1583.png',...
    'E:\myImage\testStage\1584.png',...
    'E:\myImage\testStage\1597.png',...
    'E:\myImage\testStage\1598.png',...
    'E:\myImage\testStage\1611.png',...
    'E:\myImage\testStage\1612.png',...
    'E:\myImage\testStage\1625.png',...
    'E:\myImage\testStage\1626.png',...
    'E:\myImage\testStage\1639.png',...
    'E:\myImage\testStage\1640.png',...
    'E:\myImage\testStage\1653.png',...
    'E:\myImage\testStage\1654.png',...
    'E:\myImage\testStage\1667.png',...
    'E:\myImage\testStage\1668.png',...
    'E:\myImage\testStage\1681.png',...
    'E:\myImage\testStage\1682.png',...
    'E:\myImage\testStage\1695.png',...
    'E:\myImage\testStage\1696.png',...
    'E:\myImage\testStage\1709.png',...
    'E:\myImage\testStage\1710.png',...
    'E:\myImage\testStage\1723.png',...
    'E:\myImage\testStage\1724.png',...
    'E:\myImage\testStage\1737.png',...
    'E:\myImage\testStage\1738.png',...
    'E:\myImage\testStage\1751.png',...
    'E:\myImage\testStage\1752.png',...
    'E:\myImage\testStage\1765.png',...
    'E:\myImage\testStage\1766.png',...
    'E:\myImage\testStage\1779.png',...
    'E:\myImage\testStage\1780.png',...
    'E:\myImage\testStage\1793.png',...
    'E:\myImage\testStage\1794.png',...
    'E:\myImage\testStage\1807.png',...
    'E:\myImage\testStage\1808.png',...
    'E:\myImage\testStage\1821.png',...
    'E:\myImage\testStage\1822.png',...
    'E:\myImage\testStage\1835.png',...
    'E:\myImage\testStage\1836.png',...
    'E:\myImage\testStage\1849.png',...
    'E:\myImage\testStage\1850.png',...
    'E:\myImage\testStage\1863.png',...
    'E:\myImage\testStage\1864.png',...
    'E:\myImage\testStage\1877.png',...
    'E:\myImage\testStage\1878.png',...
    'E:\myImage\testStage\1891.png',...
    'E:\myImage\testStage\1892.png',...
    'E:\myImage\testStage\1905.png',...
    'E:\myImage\testStage\1906.png',...
    'E:\myImage\testStage\1919.png',...
    'E:\myImage\testStage\1920.png',...
    'E:\myImage\testStage\1933.png',...
    'E:\myImage\testStage\1934.png',...
    'E:\myImage\testStage\1947.png',...
    'E:\myImage\testStage\1948.png',...
    'E:\myImage\testStage\1961.png',...
    'E:\myImage\testStage\1962.png',...
    'E:\myImage\testStage\1975.png',...
    'E:\myImage\testStage\1976.png',...
    'E:\myImage\testStage\1989.png',...
    'E:\myImage\testStage\1990.png',...
    'E:\myImage\testStage\2003.png',...
    'E:\myImage\testStage\2004.png',...
    'E:\myImage\testStage\2017.png',...
    'E:\myImage\testStage\2018.png',...
    'E:\myImage\testStage\2031.png',...
    'E:\myImage\testStage\2032.png',...
    'E:\myImage\testStage\2045.png',...
    'E:\myImage\testStage\2046.png',...
    'E:\myImage\testStage\2059.png',...
    'E:\myImage\testStage\2060.png',...
    'E:\myImage\testStage\2073.png',...
    'E:\myImage\testStage\2074.png',...
    'E:\myImage\testStage\2087.png',...
    'E:\myImage\testStage\2088.png',...
    'E:\myImage\testStage\2101.png',...
    'E:\myImage\testStage\2102.png',...
    'E:\myImage\testStage\2115.png',...
    'E:\myImage\testStage\2116.png',...
    'E:\myImage\testStage\2129.png',...
    'E:\myImage\testStage\2130.png',...
    'E:\myImage\testStage\2143.png',...
    'E:\myImage\testStage\2144.png',...
    'E:\myImage\testStage\2157.png',...
    'E:\myImage\testStage\2158.png',...
    'E:\myImage\testStage\2171.png',...
    'E:\myImage\testStage\2172.png',...
    'E:\myImage\testStage\2185.png',...
    'E:\myImage\testStage\2186.png',...
    'E:\myImage\testStage\2199.png',...
    'E:\myImage\testStage\2200.png',...
    'E:\myImage\testStage\2213.png',...
    'E:\myImage\testStage\2214.png',...
    'E:\myImage\testStage\2227.png',...
    'E:\myImage\testStage\2228.png',...
    'E:\myImage\testStage\2241.png',...
    'E:\myImage\testStage\2242.png',...
    'E:\myImage\testStage\2255.png',...
    'E:\myImage\testStage\2256.png',...
    'E:\myImage\testStage\2269.png',...
    'E:\myImage\testStage\2270.png',...
    'E:\myImage\testStage\2283.png',...
    'E:\myImage\testStage\2284.png',...
    'E:\myImage\testStage\2297.png',...
    'E:\myImage\testStage\2298.png',...
    'E:\myImage\testStage\2311.png',...
    'E:\myImage\testStage\2312.png',...
    'E:\myImage\testStage\2325.png',...
    'E:\myImage\testStage\2326.png',...
    'E:\myImage\testStage\2339.png',...
    'E:\myImage\testStage\2340.png',...
    'E:\myImage\testStage\2353.png',...
    'E:\myImage\testStage\2354.png',...
    'E:\myImage\testStage\2367.png',...
    'E:\myImage\testStage\2368.png',...
    'E:\myImage\testStage\2381.png',...
    'E:\myImage\testStage\2382.png',...
    'E:\myImage\testStage\2395.png',...
    'E:\myImage\testStage\2396.png',...
    'E:\myImage\testStage\2409.png',...
    'E:\myImage\testStage\2410.png',...
    'E:\myImage\testStage\2423.png',...
    'E:\myImage\testStage\2424.png',...
    'E:\myImage\testStage\2437.png',...
    'E:\myImage\testStage\2438.png',...
    'E:\myImage\testStage\2451.png',...
    'E:\myImage\testStage\2452.png',...
    'E:\myImage\testStage\2465.png',...
    'E:\myImage\testStage\2466.png',...
    'E:\myImage\testStage\2479.png',...
    'E:\myImage\testStage\2480.png',...
    'E:\myImage\testStage\2493.png',...
    'E:\myImage\testStage\2494.png',...
    'E:\myImage\testStage\2507.png',...
    'E:\myImage\testStage\2508.png',...
    'E:\myImage\testStage\2521.png',...
    'E:\myImage\testStage\2522.png',...
    'E:\myImage\testStage\2535.png',...
    'E:\myImage\testStage\2536.png',...
    'E:\myImage\testStage\2549.png',...
    'E:\myImage\testStage\2550.png',...
    'E:\myImage\testStage\2563.png',...
    'E:\myImage\testStage\2564.png',...
    'E:\myImage\testStage\2577.png',...
    'E:\myImage\testStage\2578.png',...
    'E:\myImage\testStage\2591.png',...
    'E:\myImage\testStage\2592.png',...
    'E:\myImage\testStage\2605.png',...
    'E:\myImage\testStage\2606.png',...
    'E:\myImage\testStage\2619.png',...
    'E:\myImage\testStage\2620.png',...
    'E:\myImage\testStage\2633.png',...
    'E:\myImage\testStage\2634.png',...
    'E:\myImage\testStage\2647.png',...
    'E:\myImage\testStage\2648.png',...
    'E:\myImage\testStage\2661.png',...
    'E:\myImage\testStage\2662.png',...
    'E:\myImage\testStage\2675.png',...
    'E:\myImage\testStage\2676.png',...
    'E:\myImage\testStage\2689.png',...
    'E:\myImage\testStage\2690.png',...
    'E:\myImage\testStage\2703.png',...
    'E:\myImage\testStage\2704.png',...
    'E:\myImage\testStage\2717.png',...
    'E:\myImage\testStage\2718.png',...
    'E:\myImage\testStage\2731.png',...
    'E:\myImage\testStage\2732.png',...
    'E:\myImage\testStage\2745.png',...
    'E:\myImage\testStage\2746.png',...
    'E:\myImage\testStage\2759.png',...
    'E:\myImage\testStage\2760.png',...
    'E:\myImage\testStage\2773.png',...
    'E:\myImage\testStage\2774.png',...
    'E:\myImage\testStage\2787.png',...
    'E:\myImage\testStage\2788.png',...
    'E:\myImage\testStage\2801.png',...
    'E:\myImage\testStage\2802.png',...
    'E:\myImage\testStage\2815.png',...
    'E:\myImage\testStage\2816.png',...
    'E:\myImage\testStage\2829.png',...
    'E:\myImage\testStage\2830.png',...
    'E:\myImage\testStage\2843.png',...
    'E:\myImage\testStage\2844.png',...
    'E:\myImage\testStage\2857.png',...
    'E:\myImage\testStage\2858.png',...
    'E:\myImage\testStage\2871.png',...
    'E:\myImage\testStage\2872.png',...
    'E:\myImage\testStage\2885.png',...
    'E:\myImage\testStage\2886.png',...
    'E:\myImage\testStage\2899.png',...
    'E:\myImage\testStage\2900.png',...
    'E:\myImage\testStage\2913.png',...
    'E:\myImage\testStage\2914.png',...
    'E:\myImage\testStage\2927.png',...
    'E:\myImage\testStage\2928.png',...
    'E:\myImage\testStage\2941.png',...
    'E:\myImage\testStage\2942.png',...
    'E:\myImage\testStage\2955.png',...
    'E:\myImage\testStage\2956.png',...
    'E:\myImage\testStage\2969.png',...
    'E:\myImage\testStage\2970.png',...
    'E:\myImage\testStage\2983.png',...
    'E:\myImage\testStage\2984.png',...
    'E:\myImage\testStage\2997.png',...
    'E:\myImage\testStage\2998.png',...
    'E:\myImage\testStage\3011.png',...
    'E:\myImage\testStage\3012.png',...
    'E:\myImage\testStage\3025.png',...
    'E:\myImage\testStage\3026.png',...
    'E:\myImage\testStage\3053.png',...
    'E:\myImage\testStage\3054.png',...
    'E:\myImage\testStage\3067.png',...
    'E:\myImage\testStage\3068.png',...
    'E:\myImage\testStage\3081.png',...
    'E:\myImage\testStage\3082.png',...
    'E:\myImage\testStage\3095.png',...
    'E:\myImage\testStage\3096.png',...
    'E:\myImage\testStage\3109.png',...
    'E:\myImage\testStage\3110.png',...
    'E:\myImage\testStage\3123.png',...
    'E:\myImage\testStage\3124.png',...
    'E:\myImage\testStage\3137.png',...
    'E:\myImage\testStage\3138.png',...
    'E:\myImage\testStage\3151.png',...
    'E:\myImage\testStage\3152.png',...
    'E:\myImage\testStage\3165.png',...
    'E:\myImage\testStage\3166.png',...
    'E:\myImage\testStage\3179.png',...
    'E:\myImage\testStage\3180.png',...
    'E:\myImage\testStage\3207.png',...
    'E:\myImage\testStage\3208.png',...
    'E:\myImage\testStage\3221.png',...
    'E:\myImage\testStage\3222.png',...
    'E:\myImage\testStage\3235.png',...
    'E:\myImage\testStage\3249.png',...
    'E:\myImage\testStage\3250.png',...
    'E:\myImage\testStage\3263.png',...
    'E:\myImage\testStage\3264.png',...
    'E:\myImage\testStage\3277.png',...
    'E:\myImage\testStage\3291.png',...
    'E:\myImage\testStage\3305.png',...
    'E:\myImage\testStage\3306.png',...
    'E:\myImage\testStage\3319.png',...
    'E:\myImage\testStage\3320.png',...
    'E:\myImage\testStage\3333.png',...
    };

fx = 618.469482421875;
fy = 618.7632446289062;
cx = 323.09356689453125;
cy = 237.54339599609375;
skew = 0;
squareSize=50;


% fx = 662.348631509985;
% fy = 673.158030712524;
% skew = 0;
% cx = 349.358336125349;
% cy = 238.979555744906;
% 

[imagePoints, boardSize, imagesUsed] = detectCheckerboardPoints(imageFileNames);
imageFileNames = imageFileNames(imagesUsed);
[rotationVectors, translationVectors] = computeT(squareSize,boardSize,imagePoints,imageFileNames,fx,fy,cx,cy,skew);
t = translationVectors;

figure
plot(t(:,3),'g-o')
% scatter(x(:,1),t(:,3))
grid on
grid minor 

hold on
fx = 662.348631509985;
fy = 673.158030712524;
skew = 0;
cx = 349.358336125349;
cy = 238.979555744906;

[rotationVectors, translationVectors] = computeT(squareSize,boardSize,imagePoints,imageFileNames,fx,fy,cx,cy,skew);
t = translationVectors;
plot(t(:,3),'r-o')

